parents:
  - aws-config

profile:
  cenv-admin:
    profile: aws-cenv-admin

  cenv-cluster:
    requires: cenv-admin
    operations: run
    host: "@admin_host_name"
    profile: aws-cenv-cluster

  cenv-cluster-destroy:
    requires: cenv-admin
    operations: destroy
    host: "@admin_host_name"
    profile: aws-cenv-cluster
    components:
      - certificate
      - subnet
      - firewall
      - storage
      - mount
      - load_balancer
      - server

run:
  cenv-host:
    command: host save
    host_fields:
      host: "@{admin_server_name}-@environment.@root_domain"
